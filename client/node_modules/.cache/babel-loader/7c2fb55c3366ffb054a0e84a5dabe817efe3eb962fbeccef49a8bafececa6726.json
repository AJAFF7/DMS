{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import DFP1 from\"./DFP1\";// Import DFP1 component\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const DeletePersonal=()=>{const[personalData,setPersonalData]=useState([]);const[deleteId,setDeleteId]=useState(\"\");const[error,setError]=useState(null);const[isDeleted,setIsDeleted]=useState(false);// State to track deletion status\n// Function to fetch personal data\nconst fetchPersonalData=async()=>{try{const response=await axios.get(\"/auth/personal1\");setPersonalData(response.data.data);}catch(err){setError(err.message);}};// Function to delete a personal data item\nconst deletePersonalItem=async()=>{try{if(!deleteId){setError(\"Please enter an item ID\");// Set error message if ID is empty\nsetTimeout(()=>setError(null),1000);// Clear error message after 3 seconds\nreturn;}await axios.delete(\"/auth/personal1/\".concat(deleteId));fetchPersonalData();setDeleteId(\"\");setError(null);setIsDeleted(true);// Set deletion status to true\nsetTimeout(()=>window.location.reload(),500);// Reload the page after 2 seconds\n}catch(err){setError(err.message);}};useEffect(()=>{fetchPersonalData();},[]);// Run once on component mount\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"delete-input\",type:\"text\",id:\"deleteId\",placeholder:\"Delete Data\",value:deleteId,onChange:e=>setDeleteId(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{}),\" \",/*#__PURE__*/_jsx(\"span\",{}),!isDeleted?/*#__PURE__*/_jsx(\"button\",{className:\"button-delete-dfp\",onClick:deletePersonalItem,children:/*#__PURE__*/_jsx(\"span\",{children:\"Delete by ID\"})}):/*#__PURE__*/_jsx(\"button\",{className:\"button-delete-ok\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Deleted successfully\"})}),error&&/*#__PURE__*/_jsx(\"h3\",{children:error})]})]});};export default DeletePersonal;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","DFP1","jsx","_jsx","jsxs","_jsxs","DeletePersonal","personalData","setPersonalData","deleteId","setDeleteId","error","setError","isDeleted","setIsDeleted","fetchPersonalData","response","get","data","err","message","deletePersonalItem","setTimeout","delete","concat","window","location","reload","children","className","type","id","placeholder","value","onChange","e","target","onClick"],"sources":["/Users/macbookair/Desktop/All/DMS/client/src/Personal-1/delettions.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport DFP1 from \"./DFP1\"; // Import DFP1 component\n\nconst DeletePersonal = () => {\n  const [personalData, setPersonalData] = useState([]);\n  const [deleteId, setDeleteId] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [isDeleted, setIsDeleted] = useState(false); // State to track deletion status\n\n  // Function to fetch personal data\n  const fetchPersonalData = async () => {\n    try {\n      const response = await axios.get(\"/auth/personal1\");\n      setPersonalData(response.data.data);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  // Function to delete a personal data item\n  const deletePersonalItem = async () => {\n    try {\n      if (!deleteId) {\n        setError(\"Please enter an item ID\"); // Set error message if ID is empty\n        setTimeout(() => setError(null), 1000); // Clear error message after 3 seconds\n        return;\n      }\n\n      await axios.delete(`/auth/personal1/${deleteId}`);\n      fetchPersonalData();\n      setDeleteId(\"\");\n      setError(null);\n      setIsDeleted(true); // Set deletion status to true\n      setTimeout(() => window.location.reload(), 500); // Reload the page after 2 seconds\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchPersonalData();\n  }, []); // Run once on component mount\n\n  return (\n    <div>\n      <h2></h2>\n      <div>\n        <input\n          className=\"delete-input\"\n          type=\"text\"\n          id=\"deleteId\"\n          placeholder=\"Delete Data\"\n          value={deleteId}\n          onChange={(e) => setDeleteId(e.target.value)}\n        />\n        <span /> <span />\n        {/* Conditionally render the button or the \"OK\" message */}\n        {!isDeleted ? (\n          <button className=\"button-delete-dfp\" onClick={deletePersonalItem}>\n            <span>Delete by ID</span>\n          </button>\n        ) : (\n          <button className=\"button-delete-ok\">\n            <span>Deleted successfully</span>\n          </button>\n        )}\n        {error && <h3>{error}</h3>}\n      </div>\n    </div>\n  );\n};\n\nexport default DeletePersonal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}