{"ast":null,"code":"// Import necessary dependencies\nimport React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";// Define DeleteAccount component\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const DeleteAccount=()=>{// State variables\nconst[userId,setUserId]=useState(\"\");const[message,setMessage]=useState(\"\");const navigate=useNavigate();// Fetch stored user ID on component mount\nuseEffect(()=>{const storedUserId=window.localStorage.getItem(\"userID\");console.log(\"Stored User ID:\",storedUserId);if(storedUserId!==null){setUserId(storedUserId);}},[]);// Handle user account deletion\nconst handleDeleteUser=async()=>{const confirmed=window.confirm(\"Are you sure you want to delete your account?\");if(confirmed){try{// Make API call to delete user account\nconst response=await axios.delete(\"/auth/p1-auths/\".concat(userId));// Check if the deletion was successful\nif(response.data.message){setMessage(response.data.message);// Remove userID from local storage\nwindow.localStorage.removeItem(\"userID\");// Navigate to the home page\nnavigate(\"/\");}}catch(error){setMessage(\"Error: \".concat(error.response?error.response.data.message:error.message));}}};// Render component\nreturn/*#__PURE__*/ (// <div>\n//   <button className=\"button-delete\" onClick={handleDeleteUser}></button>\n//   {message && <p>{message}</p>}\n// </div>\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"button-delete\",onClick:handleDeleteUser,children:/*#__PURE__*/_jsx(\"span\",{children:\"Delete User\"})}),message&&/*#__PURE__*/_jsx(\"p\",{children:message})]}));};// Export the component\nexport default DeleteAccount;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","DeleteAccount","userId","setUserId","message","setMessage","navigate","storedUserId","window","localStorage","getItem","console","log","handleDeleteUser","confirmed","confirm","response","delete","concat","data","removeItem","error","children","className","onClick"],"sources":["/home/dev/Environments/DMS/DMS/client/src/Personal-1/deleteaccount.js"],"sourcesContent":["// Import necessary dependencies\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\n// Define DeleteAccount component\nconst DeleteAccount = () => {\n  // State variables\n  const [userId, setUserId] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const navigate = useNavigate();\n\n  // Fetch stored user ID on component mount\n\n  useEffect(() => {\n    const storedUserId = window.localStorage.getItem(\"userID\");\n    console.log(\"Stored User ID:\", storedUserId);\n\n    if (storedUserId !== null) {\n      setUserId(storedUserId);\n    }\n  }, []);\n\n  // Handle user account deletion\n  const handleDeleteUser = async () => {\n    const confirmed = window.confirm(\n      \"Are you sure you want to delete your account?\",\n    );\n\n    if (confirmed) {\n      try {\n        // Make API call to delete user account\n        const response = await axios.delete(`/auth/p1-auths/${userId}`);\n\n        // Check if the deletion was successful\n        if (response.data.message) {\n          setMessage(response.data.message);\n\n          // Remove userID from local storage\n          window.localStorage.removeItem(\"userID\");\n\n          // Navigate to the home page\n          navigate(\"/\");\n        }\n      } catch (error) {\n        setMessage(\n          `Error: ${error.response ? error.response.data.message : error.message}`,\n        );\n      }\n    }\n  };\n\n  // Render component\n  return (\n    // <div>\n    //   <button className=\"button-delete\" onClick={handleDeleteUser}></button>\n    //   {message && <p>{message}</p>}\n    // </div>\n\n    <div>\n      <button className=\"button-delete\" onClick={handleDeleteUser}>\n        <span>Delete User</span>\n      </button>\n      {message && <p>{message}</p>}\n    </div>\n  );\n};\n\n// Export the component\nexport default DeleteAccount;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAE9C;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B;AACA,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAAAa,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9B;AAEAF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,YAAY,CAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAC1DC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEL,YAAY,CAAC,CAE5C,GAAIA,YAAY,GAAK,IAAI,CAAE,CACzBJ,SAAS,CAACI,YAAY,CAAC,CACzB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAM,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,KAAM,CAAAC,SAAS,CAAGN,MAAM,CAACO,OAAO,CAC9B,+CACF,CAAC,CAED,GAAID,SAAS,CAAE,CACb,GAAI,CACF;AACA,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAArB,KAAK,CAACsB,MAAM,mBAAAC,MAAA,CAAmBhB,MAAM,CAAE,CAAC,CAE/D;AACA,GAAIc,QAAQ,CAACG,IAAI,CAACf,OAAO,CAAE,CACzBC,UAAU,CAACW,QAAQ,CAACG,IAAI,CAACf,OAAO,CAAC,CAEjC;AACAI,MAAM,CAACC,YAAY,CAACW,UAAU,CAAC,QAAQ,CAAC,CAExC;AACAd,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAE,MAAOe,KAAK,CAAE,CACdhB,UAAU,WAAAa,MAAA,CACEG,KAAK,CAACL,QAAQ,CAAGK,KAAK,CAACL,QAAQ,CAACG,IAAI,CAACf,OAAO,CAAGiB,KAAK,CAACjB,OAAO,CACxE,CAAC,CACH,CACF,CACF,CAAC,CAED;AACA,oBACE;AACA;AACA;AACA;AAEAJ,KAAA,QAAAsB,QAAA,eACExB,IAAA,WAAQyB,SAAS,CAAC,eAAe,CAACC,OAAO,CAAEX,gBAAiB,CAAAS,QAAA,cAC1DxB,IAAA,SAAAwB,QAAA,CAAM,aAAW,CAAM,CAAC,CAClB,CAAC,CACRlB,OAAO,eAAIN,IAAA,MAAAwB,QAAA,CAAIlB,OAAO,CAAI,CAAC,EACzB,CAAC,EAEV,CAAC,CAED;AACA,cAAe,CAAAH,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}